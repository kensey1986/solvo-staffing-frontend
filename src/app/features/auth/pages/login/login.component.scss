@use '../../../../../styles/variables' as vars;
@use '../../../../../styles/mixins' as mixins;

// ==========================================================================
// LOGIN COMPONENT STYLES
// ==========================================================================

.login {
  display: flex;
  flex-direction: column;

  // ==========================================================================
  // HEADER
  // ==========================================================================

  &__header {
    text-align: center;
    margin-bottom: vars.$spacing-8;
  }

  &__title {
    font-size: vars.$font-size-headline-medium;
    font-weight: vars.$font-weight-medium;
    color: var(--mat-sys-on-surface);
    margin: 0 0 vars.$spacing-2 0;
    line-height: vars.$line-height-tight;
    transition: color vars.$transition-normal;

    @include mixins.breakpoint-down(sm) {
      font-size: vars.$font-size-headline-small;
    }
  }

  &__subtitle {
    font-size: vars.$font-size-body-large;
    color: var(--mat-sys-on-surface-variant);
    margin: 0;
    line-height: vars.$line-height-normal;
    transition: color vars.$transition-normal;
  }

  // ==========================================================================
  // FORM
  // ==========================================================================

  &__form {
    display: flex;
    flex-direction: column;
  }

  &__field {
    width: 100%;
    margin-bottom: vars.$spacing-4;

    // Proper spacing for error messages
    ::ng-deep {
      .mat-mdc-form-field-subscript-wrapper {
        min-height: 22px;
        padding-top: vars.$spacing-1;
      }

      .mat-mdc-text-field-wrapper {
        background-color: var(--mat-sys-surface-container-low);
        transition:
          background-color vars.$transition-normal,
          box-shadow vars.$transition-normal;
        border-radius: vars.$radius-sm;
      }

      .mat-mdc-form-field-focus-overlay {
        background-color: transparent;
      }

      // Improve input padding
      .mat-mdc-form-field-infix {
        padding-top: vars.$spacing-3 !important;
        padding-bottom: vars.$spacing-3 !important;
        min-height: 48px;
      }

      // Icon color
      .mat-mdc-form-field-icon-suffix {
        color: var(--mat-sys-on-surface-variant);
        padding-right: vars.$spacing-2;
        transition: color vars.$transition-normal;

        // Icon button styling
        .mat-mdc-icon-button {
          color: inherit;

          &:hover {
            color: var(--mat-sys-on-surface);
          }
        }
      }

      // Input text color
      .mat-mdc-input-element {
        color: var(--mat-sys-on-surface) !important;
        caret-color: var(--mat-sys-primary);

        &::placeholder {
          color: var(--mat-sys-on-surface-variant) !important;
          opacity: 0.7;
        }
      }

      // Label color
      .mat-mdc-floating-label {
        color: var(--mat-sys-on-surface-variant);
        transition: color vars.$transition-normal;
      }

      // Outline color
      .mdc-notched-outline__leading,
      .mdc-notched-outline__notch,
      .mdc-notched-outline__trailing {
        border-color: var(--mat-sys-outline) !important;
        transition: border-color vars.$transition-normal;
      }

      // Focused state
      &.mat-focused {
        .mat-mdc-floating-label {
          color: var(--mat-sys-primary) !important;
        }

        .mdc-notched-outline__leading,
        .mdc-notched-outline__notch,
        .mdc-notched-outline__trailing {
          border-color: var(--mat-sys-primary) !important;
          border-width: 2px;
        }
      }

      // Error message styling
      .mat-mdc-form-field-error {
        font-size: vars.$font-size-body-small;
        line-height: vars.$line-height-normal;
        margin-top: vars.$spacing-1;
      }

      // Error state outline
      &.mat-form-field-invalid {
        .mdc-notched-outline__leading,
        .mdc-notched-outline__notch,
        .mdc-notched-outline__trailing {
          border-color: var(--mat-sys-error) !important;
        }

        .mat-mdc-floating-label {
          color: var(--mat-sys-error) !important;
        }
      }

      // ==========================================================================
      // DARK MODE ENHANCEMENTS
      // ==========================================================================
      :host-context(html.dark) & {
        .mat-mdc-text-field-wrapper {
          background-color: rgba(255, 255, 255, 0.05);
          box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.05);
        }

        .mat-mdc-input-element {
          color: rgba(255, 255, 255, 0.95) !important;

          &::placeholder {
            color: rgba(255, 255, 255, 0.5) !important;
          }
        }

        .mat-mdc-floating-label {
          color: rgba(255, 255, 255, 0.7);
        }

        .mat-mdc-form-field-icon-suffix {
          color: rgba(255, 255, 255, 0.6);

          .mat-mdc-icon-button:hover {
            color: rgba(255, 255, 255, 0.9);
            background-color: rgba(255, 255, 255, 0.1);
          }
        }

        .mdc-notched-outline__leading,
        .mdc-notched-outline__notch,
        .mdc-notched-outline__trailing {
          border-color: rgba(255, 255, 255, 0.2) !important;
        }

        // Dark mode hover state
        &:hover:not(.mat-focused):not(.mat-form-field-invalid) {
          .mdc-notched-outline__leading,
          .mdc-notched-outline__notch,
          .mdc-notched-outline__trailing {
            border-color: rgba(255, 255, 255, 0.4) !important;
          }
        }

        // Dark mode focused state
        &.mat-focused {
          .mat-mdc-text-field-wrapper {
            background-color: rgba(255, 255, 255, 0.08);
          }

          .mat-mdc-floating-label {
            color: vars.$primary-light !important;
          }

          .mdc-notched-outline__leading,
          .mdc-notched-outline__notch,
          .mdc-notched-outline__trailing {
            border-color: vars.$primary-light !important;
          }
        }

        // Dark mode error state
        &.mat-form-field-invalid {
          .mdc-notched-outline__leading,
          .mdc-notched-outline__notch,
          .mdc-notched-outline__trailing {
            border-color: #f87171 !important;
          }

          .mat-mdc-floating-label {
            color: #f87171 !important;
          }

          .mat-mdc-form-field-error {
            color: #fca5a5;
          }
        }
      }
    }
  }

  // ==========================================================================
  // FORGOT PASSWORD
  // ==========================================================================

  &__forgot-password {
    display: flex;
    justify-content: flex-end;
    margin-top: 0;
    margin-bottom: vars.$spacing-6;
  }

  &__link {
    font-size: vars.$font-size-body-small;
    color: var(--mat-sys-primary);
    text-decoration: none;
    transition: color vars.$transition-fast;

    &:hover {
      color: vars.$primary-color;
      text-decoration: underline;
    }

    &:focus {
      outline: 2px solid var(--mat-sys-primary);
      outline-offset: 2px;
      border-radius: vars.$radius-sm;
    }

    // Dark mode link styling
    :host-context(html.dark) & {
      color: vars.$primary-light;

      &:hover {
        color: #93c5fd; // Lighter blue for dark mode hover
      }

      &:focus {
        outline-color: vars.$primary-light;
      }
    }
  }

  // ==========================================================================
  // ACTIONS
  // ==========================================================================

  &__actions {
    margin-top: vars.$spacing-2;

    // Ensure button has proper height
    ::ng-deep {
      .custom-button {
        min-height: 48px;
      }

      button {
        font-size: vars.$font-size-body-large;
        font-weight: vars.$font-weight-medium;
        letter-spacing: 0.3px;
      }
    }
  }
}
